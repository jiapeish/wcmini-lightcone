export function isMp() {
    var wx = globalThis.wx;
    if (typeof wx === 'undefined') {
        return false;
    }
    if (globalThis.Page === undefined) {
        return false;
    }
    if (!wx.getSystemInfoSync) {
        return false;
    }
    if (!wx.getStorageSync) {
        return false;
    }
    if (!wx.setStorageSync) {
        return false;
    }
    if (!wx.connectSocket) {
        return false;
    }
    if (!wx.request) {
        return false;
    }
    try {
        if (!wx.getSystemInfoSync()) {
            return false;
        }
        if (wx.getSystemInfoSync().AppPlatform === 'qq') {
            return false;
        }
    }
    catch (e) {
        return false;
    }
    return true;
}
var IS_IN_MP_WEBVIEW = false;
function ready() {
    IS_IN_MP_WEBVIEW = IS_IN_MP_WEBVIEW || (typeof window !== undefined && window.__wxjs_environment === 'miniprogram');
}
try {
    if (!isMp()) {
        IS_IN_MP_WEBVIEW = IS_IN_MP_WEBVIEW
            || !!navigator.userAgent.match(/miniprogram/i)
            || window.__wxjs_environment === 'miniprogram';
        if (window && window.WeixinJSBridge && window.WeixinJSBridge.invoke) {
            ready();
        }
        else if (typeof document !== 'undefined') {
            document.addEventListener('WeixinJSBridgeReady', ready, false);
        }
    }
}
catch (e) { }
export function isInMpWebView() {
    return IS_IN_MP_WEBVIEW;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXAuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvdXRpbHMvbXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxVQUFVLElBQUk7SUFDVixJQUFBLEVBQUUsR0FBSyxVQUFpQixHQUF0QixDQUFzQjtJQUNoQyxJQUFJLE9BQU8sRUFBRSxLQUFLLFdBQVcsRUFBRTtRQUM3QixPQUFPLEtBQUssQ0FBQTtLQUNiO0lBQ0QsSUFBSyxVQUFrQixDQUFDLElBQUksS0FBSyxTQUFTLEVBQUU7UUFDMUMsT0FBTyxLQUFLLENBQUE7S0FDYjtJQUNELElBQUksQ0FBQyxFQUFFLENBQUMsaUJBQWlCLEVBQUU7UUFDekIsT0FBTyxLQUFLLENBQUE7S0FDYjtJQUNELElBQUksQ0FBQyxFQUFFLENBQUMsY0FBYyxFQUFFO1FBQ3RCLE9BQU8sS0FBSyxDQUFBO0tBQ2I7SUFDRCxJQUFJLENBQUMsRUFBRSxDQUFDLGNBQWMsRUFBRTtRQUN0QixPQUFPLEtBQUssQ0FBQTtLQUNiO0lBQ0QsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUU7UUFDckIsT0FBTyxLQUFLLENBQUE7S0FDYjtJQUNELElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFO1FBQ2YsT0FBTyxLQUFLLENBQUE7S0FDYjtJQUVELElBQUk7UUFDRixJQUFJLENBQUMsRUFBRSxDQUFDLGlCQUFpQixFQUFFLEVBQUU7WUFDM0IsT0FBTyxLQUFLLENBQUE7U0FDYjtRQUVELElBQUksRUFBRSxDQUFDLGlCQUFpQixFQUFFLENBQUMsV0FBVyxLQUFLLElBQUksRUFBRTtZQUMvQyxPQUFPLEtBQUssQ0FBQTtTQUNiO0tBQ0Y7SUFBQyxPQUFPLENBQUMsRUFBRTtRQUNWLE9BQU8sS0FBSyxDQUFBO0tBQ2I7SUFFRCxPQUFPLElBQUksQ0FBQTtBQUNiLENBQUM7QUFFRCxJQUFJLGdCQUFnQixHQUFHLEtBQUssQ0FBQTtBQUM1QixTQUFTLEtBQUs7SUFDWixnQkFBZ0IsR0FBTSxnQkFBZ0IsSUFBSSxDQUFDLE9BQU8sTUFBTSxLQUFLLFNBQVMsSUFBSyxNQUFjLENBQUMsa0JBQWtCLEtBQUssYUFBYSxDQUFDLENBQUE7QUFDakksQ0FBQztBQUNELElBQUk7SUFDRixJQUFJLENBQUMsSUFBSSxFQUFFLEVBQUU7UUFDWCxnQkFBZ0IsR0FBUSxnQkFBZ0I7ZUFDbkMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQztlQUMxQyxNQUFjLENBQUMsa0JBQWtCLEtBQUssYUFBYSxDQUFBO1FBQ3pELElBQUssTUFBYyxJQUFLLE1BQWMsQ0FBQyxjQUFjLElBQUssTUFBYyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUU7WUFDOUYsS0FBSyxFQUFFLENBQUE7U0FDUjthQUFNLElBQUksT0FBTyxRQUFRLEtBQUssV0FBVyxFQUFFO1lBQzFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxxQkFBcUIsRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUE7U0FDL0Q7S0FDRjtDQUNGO0FBQUMsT0FBTyxDQUFDLEVBQUUsR0FBRTtBQUNkLE1BQU0sVUFBVSxhQUFhO0lBQzNCLE9BQU8sZ0JBQWdCLENBQUE7QUFDekIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBpc01wKCkge1xuICBjb25zdCB7IHd4IH0gPSBnbG9iYWxUaGlzIGFzIGFueVxuICBpZiAodHlwZW9mIHd4ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIGlmICgoZ2xvYmFsVGhpcyBhcyBhbnkpLlBhZ2UgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIGlmICghd3guZ2V0U3lzdGVtSW5mb1N5bmMpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICBpZiAoIXd4LmdldFN0b3JhZ2VTeW5jKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgaWYgKCF3eC5zZXRTdG9yYWdlU3luYykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIGlmICghd3guY29ubmVjdFNvY2tldCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIGlmICghd3gucmVxdWVzdCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgdHJ5IHtcbiAgICBpZiAoIXd4LmdldFN5c3RlbUluZm9TeW5jKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICh3eC5nZXRTeXN0ZW1JbmZvU3luYygpLkFwcFBsYXRmb3JtID09PSAncXEnKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG5cbmxldCBJU19JTl9NUF9XRUJWSUVXID0gZmFsc2VcbmZ1bmN0aW9uIHJlYWR5KCkge1xuICBJU19JTl9NUF9XRUJWSUVXID0gICAgSVNfSU5fTVBfV0VCVklFVyB8fCAodHlwZW9mIHdpbmRvdyAhPT0gdW5kZWZpbmVkICYmICh3aW5kb3cgYXMgYW55KS5fX3d4anNfZW52aXJvbm1lbnQgPT09ICdtaW5pcHJvZ3JhbScpXG59XG50cnkge1xuICBpZiAoIWlzTXAoKSkge1xuICAgIElTX0lOX01QX1dFQlZJRVcgPSAgICAgIElTX0lOX01QX1dFQlZJRVdcbiAgICAgIHx8ICEhbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvbWluaXByb2dyYW0vaSlcbiAgICAgIHx8ICh3aW5kb3cgYXMgYW55KS5fX3d4anNfZW52aXJvbm1lbnQgPT09ICdtaW5pcHJvZ3JhbSdcbiAgICBpZiAoKHdpbmRvdyBhcyBhbnkpICYmICh3aW5kb3cgYXMgYW55KS5XZWl4aW5KU0JyaWRnZSAmJiAod2luZG93IGFzIGFueSkuV2VpeGluSlNCcmlkZ2UuaW52b2tlKSB7XG4gICAgICByZWFkeSgpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdXZWl4aW5KU0JyaWRnZVJlYWR5JywgcmVhZHksIGZhbHNlKVxuICAgIH1cbiAgfVxufSBjYXRjaCAoZSkge31cbmV4cG9ydCBmdW5jdGlvbiBpc0luTXBXZWJWaWV3KCkge1xuICByZXR1cm4gSVNfSU5fTVBfV0VCVklFV1xufVxuIl19